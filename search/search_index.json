{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"PolarRoute-Server","text":"<p>A web server to manage requests for meshes and routes generated using the PolarRoute and MeshiPhi libraries, implemented using Django, Celery and Django REST framework.</p> <p>It currently takes vessel meshes created using MeshiPhi or PolarRoute-pipeline and serves requests for routes, which are calculated using PolarRoute.</p>"},{"location":"#setupinstallation","title":"Setup/installation","text":"<p>PolarRouteServer can be installed from GitHub using <code>pip</code>.</p> <ul> <li>Inside a virtual environment (e.g. venv, conda, etc.) run <code>pip install git+https://github.com/bas-amop/PolarRoute-server</code></li> <li>To install a specific version append the tag, e.g. <code>pip install git+https://github.com/bas-amop/PolarRoute-server@v0.1.6</code></li> <li>Alternatively, clone this repository with git and install from source with <code>pip install -e .</code></li> </ul>"},{"location":"#quickstart-using-docker-compose-recommended","title":"Quickstart using docker compose (recommended)","text":"<p>Use docker compose for development deployment to orchestrate celery and rabbitmq alongside the django development server.</p> <p>Clone this repository and run <code>docker compose up</code> to build and start the services.</p> <p>Note: In development, meshes are not automatically ingested into the database. Follow these steps to add a mesh to the database.</p> <ul> <li>Make a local directory structure with <code>mkdir -p data/mesh</code> (if it has not been created by <code>docker compose</code>).</li> <li>If you have a vessel mesh file from MeshiPhi or PolarRoute-pipeline, copy it into <code>./data/mesh</code>, which is bind-mounted into the app container. Alternatively, download an example mesh using </li> </ul> <pre><code>pushd data/mesh\n\nwget http://files.bas.ac.uk/twins/polarroute/example_vehicle_meshes/amsr_southern_SDA.json.gz &amp;&amp; \\\nwget http://files.bas.ac.uk/twins/polarroute/example_vehicle_meshes/amsr_central_SDA.json.gz &amp;&amp; \\\nwget http://files.bas.ac.uk/twins/polarroute/example_vehicle_meshes/amsr_northern_SDA.json.gz\n\ngunzip amsr_*_SDA.json.gz\n\npopd\n</code></pre> <ul> <li>Run <code>docker compose exec app /bin/bash</code> to open a shell inside the running app container.</li> <li>Run <code>django-admin insert_mesh /usr/src/app/data/mesh/&lt;MESH FILENAME&gt;</code> to insert the mesh into the database manually.</li> </ul> <p>Test that the app is working using the <code>request_route</code> tool (see Documentation). The URL of the service should be <code>localhost:8000</code>.</p> <p>The django development server supports hot reloading and the source code is bind-mounted into the container, so changes should be reflected in the running app. Any changes to <code>polarrouteserver.route_api.models.py</code> will necessitate a migration to the database. To create and run migrations, run:</p> <pre><code>docker compose exec app django-admin makemigrations\ndocker compose exec app django-admin migrate\n</code></pre> <p>Optionally, Swagger can be used to serve an API schema. This is not started by default, but can be enabled by started <code>docker compose</code> with the <code>--profile swagger</code> option, e.g. <code>docker compose --profile swagger up -d</code> - the swagger UI will be served at <code>localhost:80/swagger</code>.</p>"},{"location":"#using-this-documentation","title":"Using this documentation","text":"<p>Most of these docs are primarily aimed at developers of the package (Development) or administrators who want to deploy a copy of the server (Deployment). If you are a user/web developer who would like to request routes from PolarRoute server you should check out the Requesting Routes page and the API Reference.</p>"},{"location":"api/","title":"API Reference","text":"<p>Note: This schema can also be viewed from an instance of PolarRoute-server at <code>/api/schema/swagger-ui</code> and the yaml representation from <code>/api/schema</code>.</p> <p></p>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to this project will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"changelog/#unreleased","title":"[Unreleased]","text":""},{"location":"changelog/#027-2025-12-22","title":"0.2.7 - 2025-12-22","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Added all ports on localhost, 127.0.0.1 and 0.0.0.0 to CORS allowed origins.</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Altered the <code>/api/recent_routes</code> endpoint to return routes from the last 24 hours. Previously it returned routes from the current calendar day.</li> <li>Renamed and repositioned \"Falklands\" location to \"Mare Harbour\".</li> </ul>"},{"location":"changelog/#026-2025-12-17","title":"0.2.6 - 2025-12-17","text":""},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>Added missing migration.</li> </ul>"},{"location":"changelog/#025-2025-12-15","title":"0.2.5 - 2025-12-15","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li>added ensure_adminuser command to add subtly more sophisticated behaviour to Django's createsuperuser - i.e. don't raise non-zero exit code if superuser already exists, add more useful output.</li> <li>Empty arrays to empty responses for a consistent response structure.</li> <li>Adding a \"tags\" field to the Route model. As an optional parameter, tags can be assigned to routes using a POST api/route request. This is implemented using django-taggit.</li> <li>Added environment variables for controlling logging behaviour: POLARROUTE_LOG_FILE_NAME, CELERY_LOG_DIR, CELERY_LOG_FILE_NAME (in addition to existing: POLARROUTE_LOG_DIR).</li> <li>Added rotating logging handler.</li> </ul>"},{"location":"changelog/#improved","title":"Improved","text":"<ul> <li>Improved speed of route changelist admin page.</li> <li>Write logs with group-write permissions.</li> <li>Use uv in the docker image.</li> </ul>"},{"location":"changelog/#changed_1","title":"Changed","text":"<ul> <li>Inappropriate use of 204 code: RecentRoutesView changed from 204 to 200 OK with an empty array and the original message (\"No recent routes found for today.\").</li> <li>Inappropriate use of 204 code: VehicleTypeListView changed from 204 to 200 OK with and empty array and the original message.</li> <li>MeshView - Changed from 204 to 404 Not Found when mesh doesn't exist.</li> <li>Updated tests to reflect corrected HTTP status codes.</li> <li>Remove one layer of error response nesting in failed job response.</li> <li>Made route admin panel more read-only and faster; hide full view of JSON fields.</li> </ul>"},{"location":"changelog/#fixed_1","title":"Fixed","text":"<ul> <li>Corrected mesh data source checking and improved warning message to reduce confusion for missing current data.</li> <li>Add erroneously missing <code>rest_framework</code> into <code>INSTALLED_APPS</code>.</li> <li>Remove unique constraint and add id field to locations fixture to prevent duplication.</li> <li>Corrected mesh metadata filename pattern.</li> <li>Corrected mesh id type in api schema.</li> <li>Catch more errors in route evaluation, return a better error message from evaluate route endpoint.</li> </ul>"},{"location":"changelog/#024-2025-11-11","title":"0.2.4 - 2025-11-11","text":""},{"location":"changelog/#fixed_2","title":"Fixed","text":"<ul> <li>Included migration for changes to location model.</li> <li>Inclusion of fixtures in source code distribution by using <code>MANIFEST.in</code> in place of <code>package_data</code> in <code>pyproject.toml</code>.</li> </ul>"},{"location":"changelog/#023-2025-11-10","title":"0.2.3 - 2025-11-10","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li>This changelog!</li> </ul>"},{"location":"changelog/#changed_2","title":"Changed","text":"<ul> <li>Restricted upper limit of Django support to version 5.2</li> <li>Name of maintainer from David Wilby to David Wyld.</li> <li>Moved the docker volume for the <code>db</code> service to a managed volume instead of a bind-mount.</li> </ul>"},{"location":"changelog/#request_route","title":"<code>request_route</code>","text":"<ul> <li>utility move to its own module.</li> </ul>"},{"location":"changelog/#fixed_3","title":"Fixed","text":"<ul> <li><code>request_route</code> utility now does not wait for the delay period before the first status request, only after receipt of a 'PENDING' job status.</li> </ul>"},{"location":"changelog/#removed","title":"Removed","text":"<ul> <li>Support for python 3.9</li> <li>Support for Django &lt; 5.2</li> </ul>"},{"location":"changelog/#022-2025-10-14","title":"0.2.2 - 2025-10-14","text":""},{"location":"changelog/#added_3","title":"Added","text":"<ul> <li>Optimisation metrics exposure (time, fuel, distance) in route responses.</li> <li>Job ID inclusion in <code>recent_routes</code> response for better tracking.</li> <li>Recent routes output validation tests.</li> </ul>"},{"location":"changelog/#changed_3","title":"Changed","text":"<ul> <li>Breaking: Route response structure now consistent regardless of optimisation types available.</li> <li>Improved <code>recent_routes</code> endpoint performance by removing repeated job status calls and heavy JSON processing.</li> <li>Route calculated timestamp only applied when both route optimisations are complete.</li> <li>Re-coupled <code>recent_routes</code> status to Celery state using database instead of broker for better reliability/performance.</li> <li>Removed top-level metadata duplication in route responses.</li> </ul>"},{"location":"changelog/#fixed_4","title":"Fixed","text":"<ul> <li>Performance issues with <code>recent_routes</code> endpoint loading unnecessary data.</li> </ul>"},{"location":"changelog/#021-2025-09-18","title":"0.2.1 - 2025-09-18","text":""},{"location":"changelog/#added_4","title":"Added","text":"<ul> <li>Response refactor for improved error code consistency.</li> <li>New <code>responses.py</code> module for centralized response handling.</li> <li>Response validation tests (<code>test_responses.py</code>).</li> <li>Location management functionality.</li> <li>Job status schema with all possible Celery states.</li> <li>Vehicle management with CRUD operations.</li> <li>Vehicle configuration validation using PolarRoute validator.</li> <li>Location fixtures for standard locations (Bird Island, Falklands, Halley, Rothera, etc.).</li> <li>Swagger UI served alongside the application.</li> </ul>"},{"location":"changelog/#changed_4","title":"Changed","text":"<ul> <li>Breaking: Separated job and route endpoints - routes now accessed via job workflow.</li> <li>Breaking: Route cancellation moved from route endpoint to job endpoint.</li> <li>Unified error responses across all endpoints for consistency.</li> <li>Route model now cascades deletion when job is deleted.</li> <li>Vehicle model expanded with additional SDA properties (<code>beam</code>, <code>hull_type</code>, <code>force_limit</code>).</li> <li>LocationView refactored to <code>LocationViewSet</code>.</li> </ul>"},{"location":"changelog/#fixed_5","title":"Fixed","text":"<ul> <li>Route schema missing from API documentation after merge conflicts.</li> <li>Inconsistent error response formats across endpoints.</li> <li>Route cancellation bug where deletion didn't work properly.</li> </ul>"},{"location":"changelog/#removed_1","title":"Removed","text":"<ul> <li>Redundant \"no mesh available\" response variations - now unified.</li> <li>Separate route cancellation endpoint (moved to job endpoint).</li> </ul>"},{"location":"changelog/#020-2025-02-19","title":"0.2.0 - 2025-02-19","text":""},{"location":"changelog/#016-2024-12-09","title":"0.1.6 - 2024-12-09","text":""},{"location":"changelog/#015-2024-12-05","title":"0.1.5 - 2024-12-05","text":""},{"location":"changelog/#014-2024-11-28","title":"0.1.4 - 2024-11-28","text":""},{"location":"changelog/#013-2024-11-26","title":"0.1.3 - 2024-11-26","text":""},{"location":"changelog/#012-2024-11-25","title":"0.1.2 - 2024-11-25","text":""},{"location":"changelog/#011-2024-11-20","title":"0.1.1 - 2024-11-20","text":""},{"location":"changelog/#010-2024-11-20","title":"0.1.0 - 2024-11-20","text":""},{"location":"configuration/","title":"Configuration","text":"<p>Configuration of PolarRouteServer works with environment variables. You can either set these directly or from a <code>.env</code> file. An example <code>.env</code> file is included in the repo as <code>env.example</code>.</p> <p>Environment variables used directly by the Django site are prefixed wit <code>POLARROUTE_</code> and those which configure Celery are prefixed with <code>CELERY_</code>.</p>"},{"location":"configuration/#mesh-settings","title":"Mesh settings","text":"<ul> <li><code>POLARROUTE_MESH_DIR</code> - absolute path to directory where mesh files will be made available (this location is periodically checked in production and new files ingested into the database based on the metadata file). A warning is logged in production if this is not set.</li> <li><code>POLARROUTE_MESH_METADATA_DIR</code> - as above, absolute path to directory where mesh metadata files will be made available. If this is not set, the value of <code>POLARROUTE_MESH_DIR</code> is used and a warning to this effect is logged.</li> </ul>"},{"location":"configuration/#django-settings","title":"Django settings","text":"<p>The following are inherited from Django and more information can be found on their effects via the Django docs.</p> <ul> <li><code>POLARROUTE_DEBUG</code> - enables Django debug options, must be <code>False</code> in production (default: <code>False</code>)</li> <li><code>POLARROUTE_SECRET_KEY</code> - secret hash used for cookie signing etc. Must be set in production. A random key is generated if one is not set.</li> <li><code>DJANGO_SETTINGS_MODULE</code> - sets the settings envrionment. Options: <code>polarrouteserver.settings.{production,development,test}</code> (Default: <code>polarrroutesserver.settings.production</code>)</li> <li><code>POLARROUTE_ALLOWED_HOSTS</code> - comma-separated (no spaces) list of IP addresses or hostnames allowed for the server.</li> <li><code>POLARROUTE_CORS_ALLOWED_ORIGINS</code> -  comma-separated (no spaces) list of IP addresses allowed for Cross Origin Site Requests. (See django-cors-headers on PyPI for more.)</li> <li><code>CELERY_BROKER_URL</code> - URL for rabbitMQ message broker used by celery. (Default: <code>amqp://guest:guest@localhost</code>)</li> <li><code>POLARROUTE_LOG_LEVEL</code> - sets the logging level from standard log level options: INFO, DEBUG, ERROR, WARNING etc. (Default: <code>INFO</code>)</li> <li><code>POLARROUTE_LOG_DIR</code> - sets the output directory for logs. By default only used in production settings environment.</li> <li><code>POLARROUTE_STATIC_ROOT</code> - the path to directory used for static file serving in production, e.g. <code>\"/var/www/example.com/static/\"</code> (Default: <code>None</code>) Note this is only used for the admin panel in this application.</li> </ul>"},{"location":"configuration/#database-settings","title":"Database settings","text":"<ul> <li><code>POLARROUTE_DB_NAME</code> - postgres database name (default: <code>polarroute</code>)</li> <li><code>POLARROUTE_DB_USER</code> - postgres database user (default: <code>polarroute</code>)</li> <li><code>POLARROUTE_DB_PASSWORD</code> - postgres database password (default: <code>polarroute</code>)</li> <li><code>POLARROUTE_DB_HOST</code> - postgres database host (default: <code>127.0.0.1</code>)</li> <li><code>POLARROUTE_DB_PORT</code> - postgres database port (default: <code>5432</code>)</li> </ul>"},{"location":"deployment/","title":"Deployment","text":"<p>For a production deployment, the following are required:</p> <ul> <li>WSGI server, e.g. Gunicorn, mod_wsgi (httpd),</li> <li>PostgreSQL database</li> <li>Celery and celery beat servers running,</li> <li>Access to a RabbitMQ server,</li> </ul>"},{"location":"deployment/#configuration","title":"Configuration","text":"<p>Configuration of PolarRouteServer works with environment variables, these are covered in Configuration in detail.</p> <p>It is up to you how you choose to set these environment variables in your deployment.</p>"},{"location":"deployment/#setting-up-the-database","title":"Setting up the database","text":"<p>Assuming you have a running PostgreSQL database and that the environment variables are set, particularly all of the database connection settings and <code>DJANGO_SETTINGS_MODULE</code> run:</p> <pre><code>$ django-admin migrate\n</code></pre> <p>to build the database.</p> <p>When running this for the first time, you may need to point to your <code>DJANGO_SETTINGS_MODULE</code>:</p> <pre><code>export DJANGO_SETTINGS_MODULE=polarrouteserver.settings.development\n</code></pre>"},{"location":"deployment/#create-a-superuser-in-the-database","title":"Create a superuser in the database","text":"<p>Run the following and follow the prompts.</p> <pre><code>$ django-admin createsuperuser\n</code></pre>"},{"location":"deployment/#management-of-a-deployment","title":"Management of a deployment","text":"<p>All of the commands used for administration of a Django project are available post-installation via the <code>django-admin</code> command. Note that the envrionment variables used will need to be set in the session which you're running these commands.</p> <p>Note that the same commands can be run by running <code>python manage.py</code> where <code>manage.py</code> is the file contained in the top level of the repository.</p> <p>Of particular interest in production are:</p> <pre><code>$ django-admin makemigrations # create new migrations files based on changes to models\n$ django-admin migrate # apply new migrations files to alter the database\n$ django-admin dbshell # open the database's command line interface\n</code></pre> <p>To see more commands, run <code>django-admin --help</code>.</p> <p>In addition a custom command is available to manually insert new meshes into the database from file:</p> <pre><code>$ django-admin insert_mesh &lt;Mesh file or list of files&gt;\n</code></pre> <p><code>insert_mesh</code> takes a filename or list of filepaths containing meshes either as <code>.vessel.json</code> format or gzipped vessel mesh files.</p> <p>Only meshes which are not present in the database will be inserted. Uniqueness is based on the md5 hash of the unzipped vessel mesh file.</p>"},{"location":"deployment/#configuring-a-web-server","title":"Configuring a web server","text":"<p>PolarRoute-server can be served similarly to any other Django application, see Django docs for more information. Or see the instructions for httpd/mod_wsgi below.</p>"},{"location":"deployment/#configuring-mod_wsgi","title":"Configuring mod_wsgi","text":"<p>If you are using mod_wsgi to serve PolarRoute-server under httpd, a typical <code>.conf</code> file may look something like:</p> <pre><code>&lt;VirtualHost *:443&gt;\nServerName polarroute.myserver.com\nDocumentRoot /path/to/my/polarrouteserver/\nLogLevel info\nSSLEngine on\nSSLCertificateFile /local/certs/myserver.com.pem\n\n    PassEnv DJANGO_SETTINGS_MODULE\n    PassEnv POLARROUTE_MESH_DIR\n    PassEnv POLARROUTE_MESH_METADATA_DIR\n    PassEnv POLARROUTE_ALLOWED_HOSTS\n    PassEnv POLARROUTE_CORS_ALLOWED_ORIGINS\n    PassEnv POLARROUTE_STATIC_ROOT\n    PassEnv CELERY_BROKER_URL\n    PassEnv CELERYD_CHDIR\n    PassEnv POLARROUTE_DEBUG\n    PassEnv POLARROUTE_LOG_DIR\n    PassEnv POLARROUTE_BASE_DIR\n    PassEnv POLARROUTE_LOG_LEVEL\n\n    PassEnv POLARROUTE_DB_NAME\n    PassEnv POLARROUTE_DB_USER\n    PassEnv POLARROUTE_DB_PASSWORD\n    PassEnv POLARROUTE_DB_HOST\n\nWSGIDaemonProcess polarroute.myserver.com user=wsgi group=wsgi threads=5 python-home=/path/to/my/python/home python-path=/path/to/my/python/path\nWSGIProcessGroup polarroute.myserver.com\nWSGIApplicationGroup %{GLOBAL}\nWSGIScriptAlias / /path/to/my/polarrouteserver//wsgi.py\nAlias /static /var/www/polarroute.myserver.com/static\nCustomLog /var/log/httpd/access_log.polarroute.myserver.com combined\nErrorLog /var/log/httpd/error_log.polarroute.myserver.com\n\n&lt;Location /&gt;\nRequire all granted\n&lt;/Location&gt;\n&lt;/VirtualHost&gt;\n\n&lt;Directory \"/path/to/my/polarrouteserver/\"&gt;\nAllowOverride All\nOptions -Indexes\nRequire all granted\nWSGIScriptReloading On\nWSGIProcessGroup polarroute.myserver.com\nWSGIApplicationGroup %{GLOBAL}\n\n&lt;/Directory&gt;\n\n&lt;Directory /var/www/polarroute.myserver.com/static/&gt;\nOrder allow,deny\nAllow from all\n&lt;/Directory&gt;\n</code></pre>"},{"location":"deployment/#collecting-static-files","title":"Collecting static files","text":"<p>PolarRoute-server itself has no static files since it is a headless server, however it does make use of Django's <code>/admin</code> endpoint as a database management dashboard. For this to work, we need to create a static file location, e.g. <code>/var/www/polarroute.{{ hostname }}/static</code> and run the following commands (noting to use the correct path to your static file location):</p> <pre><code>export DJANGO_SETTINGS_MODULE=polarrouteserver.settings.production\nexport POLARROUTE_STATIC_ROOT=/var/www/polarroute.myserver.com/static/\ndjango-admin collecstatic\n</code></pre> <p>This only needs to be run once.</p>"},{"location":"deployment/#other-recommendations","title":"Other recommendations","text":"<p>It is also recommended to do the following in a deployment:</p> <ul> <li>Add polarrouteserver and celery logs to logrotate - logfiles are written from polarrouteserver and celery to files in <code>POLARROUTE_LOG_DIR</code>, it is prudent to add these to a log rotation utility such as logrotate.</li> <li>Manage Celery, Celerybeat and rabbitmq under systemd.</li> </ul>"},{"location":"development/","title":"Development","text":"<p>Depends on:</p> <ul> <li>Python &gt;=3.11</li> <li>docker for running rabbitmq</li> <li>Make</li> </ul> <p></p> <ol> <li>Clone the repository and create and activate a python virtual environment of your choice.</li> <li>Inside a virtual environment or machine: <code>pip install -e .[dev]</code></li> <li>Make sure you have a running instance of the database, by running <code>docker compose up</code>, if it is not running already.</li> <li>Before first use, create the database by running <code>make migrate</code></li> <li>To start all of the services needed for the dev deployment run: <code>make serve-dev</code> (which sets the <code>DJANGO_SETTINGS_MODULE</code> environment variable and spins up celery, rabbitmq in a docker container, and the Django development server)</li> </ol> <p>For development, also install and use the development tools with <code>pre-commit install</code></p> <p>The pre-commit hooks include automatic API schema generation. When you commit changes to <code>polarrouteserver/route_api/views.py</code>, the API schema (<code>docs/apischema.yml</code>) will be automatically updated and included in your commit.</p> <p>A number of helpful development tools are made available through the <code>Makefile</code>, to see a description of each of these commands, run <code>make</code> (with no arguments) from the top-level of this directory.</p> <p>Important: Please ensure all changes are included in <code>CHANGELOG.md</code> in a human-friendly format.</p>"},{"location":"development/#debugging-with-docker-compose","title":"Debugging with docker compose","text":"<p>To run using a debugger in e.g. VS Code, run with the additional compose file <code>compose.debug.yml</code> which adds some additional settings to enable this.</p> <p>Do so with: <code>docker compose -f compose.yml -f compose.debug.yml up</code></p> <p>This will launch the containers, but the <code>app</code> service will stop until a debugger is attached.</p> <p>For VS Code, the launch config should look like:</p> <pre><code>{\n    \"version\": \"0.2.0\",\n    \"configurations\": [\n        {\n            \"name\": \"Debug Dockerised Django\",\n            \"type\": \"debugpy\",\n            \"request\": \"attach\",\n            \"pathMappings\": [\n                {\n                \"localRoot\": \"${workspaceFolder}\",\n                \"remoteRoot\": \"/usr/src/app\"\n                }\n            ],\n            \"connect\": {\"host\": \"127.0.0.1\", \"port\": 5678},\n        }\n    ]\n}\n</code></pre> <p>Run the debugger using this config to run the debugger listening to the debugging port configured.</p>"},{"location":"development/#releaseversioning","title":"Release/Versioning","text":"<p>Version numbers should be used in tagging commits on the <code>main</code> branch and reflected in the <code>pyproject.toml</code> file and should be of the form <code>v0.1.7</code> using the semantic versioning convention.</p> <p>Note on version numbers: Setuptools-scm requires version numbers that begin with a <code>v</code> and setuptools requires PEP 440-compliant version numbers, e.g. <code>v0.1.7</code>, or for non release versions: <code>v0.1.7a1</code> for alphas, <code>v0.1.7rc1</code> for release candidates. Installing the package will fail if tags have version numbers deviating from this format.</p> <p>Release preparation (i.e. updating version numbers in <code>CHANGELOG.md</code> and <code>apischema.yml</code>) can be done automatically with <code>make prep-release version=&lt;VERSION-NUMBER&gt;</code> (without the 'v'). Note that this does not rebuild the API schema, just changes the version number.</p>"},{"location":"development/#building-deploying-the-documentation","title":"Building &amp; deploying the documentation","text":"<p>The documentation should build automatically on pushes to <code>main</code> using GitHub actions, if you want to build and deploy the docs manually, follow these steps:</p> <ul> <li>Run <code>make build-docs</code> to build the docs to the <code>./site</code> directory.</li> <li>Then run <code>make deploy-docs</code> to deploy to the <code>gh-pages</code> branch of the repository. You must have write access to the repo.</li> </ul>"},{"location":"development/#making-changes-to-the-api","title":"Making changes to the API","text":"<p>The API is documented in <code>./docs/apischema.yml</code> using the OpenAPI 3.0 standard (formerly known as swagger).</p> <p>If you have pre-commit hooks installed (<code>pre-commit install</code>), the API schema will be automatically updated when you commit changes to Python files. The updated schema will be included in your commit.</p> <p>You can also manually re-generate the schema by running:</p> <pre><code>make build-apischema\n# or directly:\npython manage.py spectacular --color --validate --file docs/apischema.yml\n</code></pre> <p>Aim to resolve any warnings/errors before committing.</p> <p>The generated schema can be checked by building the docs and checking the API reference page or serving using swagger (<code>make start-swagger</code>).</p>"},{"location":"development/#error-codes-and-response-schemas","title":"Error codes and response schemas","text":"<p>Standard error codes and responses are defined in the <code>ResponseMixin</code> class in <code>responses.py</code>. Where possible, try to align standard responses (e.g. 200 SUCCESS, 202 ACCEPTED, 400 BAD REQUESTS, 404 NOT FOUND) to these standard codes and responses.</p> <p>Views in <code>views.py</code> can inherit <code>ResponseMixin</code> class to make use of these standard responses.</p>"},{"location":"development/#docker-containers-and-compose-configuration","title":"Docker containers and compose configuration","text":"<p>PolarRoute-server relies on four different services, orchestrated by docker compose, to each be running in their own docker container.</p> <p>As a user, you run a single <code>docker compose up</code> command to build and start these services.</p> <p>As a developer, it is useful to be aware of what exactly these containers are doing.</p> <p>Pre-fixed by <code>polarroute-server-</code>, the four services/containers are: * <code>db-*</code>: a PostgreSQL database. * <code>rabbitmq-*</code>: RabbitMQ. * <code>celery-*</code>: Celery. * <code>app-*</code>: The Django server running PolarRoute-server's route API.</p> <p>Certain actions may rely on just a single service to be running, for example <code>make migrate</code> requires <code>polarroute-server-db-1</code> to be running. However, in practice, you will always be running all four containers at the same time.</p> <p>Configurations for <code>docker compose up</code>'s execution are set in <code>compose.yml</code>.</p>"},{"location":"how-polarroute-server-works/","title":"How PolarRoute-server works","text":"<p>This page gives an overview of the architecture and approach of the software for developers or administrators of PolarRoute-server.</p>"},{"location":"how-polarroute-server-works/#polarroute-server-architecture","title":"PolarRoute-server architecture","text":"<p>As with all Django apps, PolarRoute-server follows a model-view-controller-like architecture (see Django FAQ for the specifics) in which a <code>models.py</code> file defines the tables in the database; <code>views.py</code> defines the handling of HTTP requests. Most Django apps also have templates, but since PolarRoute-server is headless, we don't need these.</p> <p>The route request workflow is separated into distinct endpoints:</p> <ol> <li>Route Request Submission: User submits a route request via POST to the <code>/api/route</code> endpoint.</li> <li>Job Creation: A celery job is created for route calculation (defined in <code>tasks.py</code>) and the client receives a job ID and status URL.</li> <li>Job Status Monitoring: Client polls the <code>/api/job/{job_id}</code> endpoint by GET request to monitor calculation progress.</li> <li>Route Data Retrieval: Once the job is complete, client retrieves the route data from <code>/api/route/{route_id}</code> endpoint.</li> </ol> <p>In short:</p> <ul> <li><code>POST /api/route</code>: Submit route calculation request \u2192 returns job ID.</li> <li><code>GET /api/job/{job_id}</code>: Monitor job status and progress.</li> <li><code>DELETE /api/job/{job_id}</code>: Cancel running job.</li> <li><code>GET /api/route/{route_id}</code>: Retrieve calculated route data.</li> </ul> <p>To calculate a route, PolarRoute requires a mesh that covers the area of the start and end points of the route.</p>"},{"location":"how-polarroute-server-works/#ingesting-meshes-into-the-database","title":"Ingesting meshes into the database","text":"<p>For the time-being, meshes are calculated separately to PolarRoute-server, either with PolarRoute-pipeline or with MeshiPhi directly.</p> <p>The application takes vessel meshes, with the vessel transformation already applied.</p> <p>Meshes can be ingested into the database manually or automatically.</p> <p>By default, development deployments (using the <code>polarrouteserver/settings/development.py</code> settings) perform no automatic mesh ingestion, and production deployments (using the <code>polarrouteserver/settings/production.py</code> settings) use celery-beat to perform automatic ingestion of meshes every 10 minutes, running the <code>import_new_meshes</code> task (<code>polarrouteserver/route_api/tasks.py</code>).</p>"},{"location":"how-polarroute-server-works/#automatically","title":"Automatically","text":"<p>Meshes are found automatically in the directories specified using the <code>POLARROUTE_MESH_DIR</code> &amp; <code>POLARROUTE_MESH_METADATA_DIR</code> environment variables (see Configuration for specific behaviour). Mesh metadata files produced by PolarRoute-pipeline are used to validate newly available meshes, only meshes which are not already in the database (determined using their md5 hash) are ingested. Mesh metadatafiles must be named according to the format <code>upload_metadata_*.yaml.gz</code> to be found.</p>"},{"location":"how-polarroute-server-works/#manually","title":"Manually","text":"<p>Individual or lists of mesh files can be ingested into the database by running the <code>insert_mesh</code> command using <code>django-admin</code> or <code>python manage.py</code>, e.g. <code>django-admin insert_mesh path/to/my/mesh.vessel.json</code>.</p> <p><code>insert_mesh</code> can take <code>json</code> files or <code>json.gz</code> files.</p>"},{"location":"how-polarroute-server-works/#route-requests-and-jobs","title":"Route requests and jobs","text":"<p>When a route is requested, the <code>select_mesh</code> function is called to determine which mesh to use (described below in Mesh selection) unless a specific mesh id is requested in the route request.</p> <p>The <code>route_exists</code> function is called for the start and end points and the mesh selected, if there is already an existing route which was successful, this is returned unless the client specifies <code>force_new_route: true</code>, in which case the route is recalculated. Whether a route is considered to \"exist\" or not depends on a tolerance in the haversine distance of the requested start and end locations compared to routes which have already been calculated. This distance by default is 1 nautical mile (set by the <code>WAYPOINT_DISTANCE_TOLERANCE</code> setting). In other words, if a route is requested where the requested start point is within 1NM of a route already calculated and the same is true of the end point, this route is returned under default conditions. Note that if a newer mesh is available, a new route will be calculated.</p> <p>Because route optimisation jobs can take several minutes, this is done by an asynchronous job queue managed by celery.</p> <p>If the route optimisation fails, the next mesh in priority order is tried if the failure is due to the route being \"inaccessible\" on the mesh.</p>"},{"location":"how-polarroute-server-works/#mesh-selection","title":"Mesh selection","text":"<p>Before a route is calculated, a priority list of meshes is created by <code>polarrouteserver.route_api.utils.select_mesh</code>.</p> <p>It takes all of the meshes that contain the requested start and end coordinates and that were created on the latest date available out of those meshes and returns this list of meshes sorted from smallest to largest total area.</p>"},{"location":"how-polarroute-server-works/#troubleshooting","title":"Troubleshooting","text":""},{"location":"requesting-routes/","title":"Requesting Routes","text":""},{"location":"requesting-routes/#using-the-in-built-request_route-utility-simplest","title":"Using the in-built <code>request_route</code> utility (simplest)","text":"<p>A route request script is available in this repo (<code>./request_route/request_route.py</code>) to be used as a utility for making route requests.</p> <p>To obtain, either:</p> <ul> <li>Clone this whole repo</li> <li>Download the file from its GitHub page here: https://github.com/bas-amop/PolarRoute-server/blob/main/request_route/route_request.py</li> </ul> <p>This can be done with <code>wget</code> by running:</p> <pre><code>wget https://raw.githubusercontent.com/bas-amop/PolarRoute-server/refs/heads/main/request_route/request_route.py\n</code></pre> <p>To run, you'll just need python ~3.11 installed. Earlier versions of python may work, but are untested.</p>"},{"location":"requesting-routes/#usage","title":"Usage","text":"<p>Help for the utility can be printed out by running <code>python request_route.py --help</code>.</p> <p>Alternatively, if you have the package installed, a command named <code>request_route</code> is made available.</p> <pre><code>$ request_route --help\n# OR\n$ python request_route.py --help\n\nusage: request_route.py [-h] [-u URL] -s [START] -e [END] [-d [DELAY]] [-n [REQUESTS]] [-m [MESHID]] [-f] [-o [OUTPUT]]\n\nRequests a route from polarRouteServer, monitors job status until complete, then retrieves the route data. Specify start and end points by coordinates or from one of the standard locations: ['bird', 'falklands', 'halley', 'rothera', 'kep', 'signy', 'nyalesund', 'harwich', 'rosyth']\n\noptions:\n  -h, --help            show this help message and exit\n  -u URL, --url URL     Base URL to send request to.\n  -s [START], --start [START]\n                        Start location either as the name of a standard location or latitude,longitude separated by a comma, e.g. -56.7,-65.01\n  -e [END], --end [END]\n                        End location either as the name of a standard location or latitude,longitude separated by a comma, e.g. -56.7,-65.01\n  -d [DELAY], --delay [DELAY]\n                        (integer) number of seconds to delay between status calls. Default: 30\n  -n [REQUESTS], --requests [REQUESTS]\n                        (integer) number of status requests to make before stopping. Default: 10\n  -m [MESHID], --meshid [MESHID]\n                        (integer) Custom mesh ID.\n  -f, --force           Force polarRouteServer to recalculate the route even if it is already available.\n  -o [OUTPUT], --output [OUTPUT]\n                        File path to write out route to. (Default: None and print to stdout)\n</code></pre> <p>So to request a route from Falklands to Rothera, for example:</p> <pre><code>python request_route.py --url http://example-polar-route-server.com -s falklands -e rothera --delay 120 --output demo_output.json\n</code></pre> <p>This will request the route from the server running at <code>http://example-polar-route-server.com</code>, and initiate a route calculation if one is not already available.</p> <p>The utility will then monitor the job status every <code>120</code> seconds until the route calculation is complete.</p> <p>The HTTP response from each request will be printed to stdout.</p> <p>Once the route is available it will be retrieved and returned, or if the maximum number of attempts have passed, the utility will stop.</p>"},{"location":"requesting-routes/#by-making-http-requests","title":"By making HTTP requests","text":"<p>For details on the API, see the API reference page.</p> <p>The route request workflow consists of three steps:</p>"},{"location":"requesting-routes/#1-submit-route-request","title":"1. Submit Route Request","text":"<p>Make a POST request to the <code>/api/route</code> endpoint to submit a route calculation job:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request POST \\\n  --data '{\"start_lat\":\"-51.73\",\"start_lon\":\"-57.71\", \"end_lat\":\"-54.03\",\"end_lon\":\"-38.04\"}' \\\n  http://localhost:8000/api/route\n</code></pre> <p>This will return a response containing:</p> <ul> <li><code>id</code>: The job ID for monitoring status.</li> <li><code>status-url</code>: URL for checking job status (e.g., <code>http://localhost:8000/api/job/{job_id}</code>).</li> <li>If a pre-existing route is found, it may be returned immediately.</li> </ul>"},{"location":"requesting-routes/#2-monitor-job-status","title":"2. Monitor Job Status","text":"<p>Use the job ID to monitor the calculation status by making GET requests to the <code>/api/job/{job_id}</code> endpoint:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request GET \\\n  http://localhost:8000/api/job/5c39308e-b88c-4988-9e4b-1c33bc97c90c\n</code></pre> <p>The response will include:</p> <ul> <li> <p><code>status</code>: Current job status. Possible values (these are Celery states):</p> <ul> <li><code>PENDING</code>: Task is waiting for execution</li> <li><code>STARTED</code>: Task has been started</li> <li><code>SUCCESS</code>: Task executed successfully (route data is ready)</li> <li><code>FAILURE</code>: Task failed with an exception</li> <li><code>RETRY</code>: Task is being retried after failure</li> <li><code>REVOKED</code>: Task was revoked/cancelled</li> </ul> </li> <li> <p><code>route_id</code>: The route ID for data retrieval (available when status is SUCCESS).</p> </li> <li><code>route_url</code>: Direct URL to retrieve the route data (e.g., <code>http://localhost:8000/api/route/{route_id}</code>).</li> <li><code>info</code>: Error details (only present when status is FAILURE).</li> </ul>"},{"location":"requesting-routes/#3-retrieve-route-data","title":"3. Retrieve Route Data","text":"<p>Once the job status is SUCCESS, retrieve the actual route data using the route ID:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request GET \\\n  http://localhost:8000/api/route/9\n</code></pre> <p>This will return the complete route data.</p>"},{"location":"requesting-routes/#optional-cancel-job","title":"Optional: Cancel Job","text":"<p>You can cancel a running job by making a DELETE request to the job endpoint:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request DELETE \\\n  http://localhost:8000/api/job/5c39308e-b88c-4988-9e4b-1c33bc97c90c\n</code></pre>"},{"location":"vehicle-management/","title":"Vehicle Management","text":"<p>In order to add vehicles to environment meshes, they will first need to be created in the database.</p> <p>For details on the API, see the API reference page.</p>"},{"location":"vehicle-management/#creating-vehicles","title":"Creating vehicles","text":"<p>To request a vehicle to be added to the database, make a POST request to the <code>/api/vehicle</code> endpoint, for example with the following CURL:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request POST \\\n  --data '{\n       \"vessel_type\": \"SDA\",\n       \"max_speed\": 26.5,\n       \"unit\": \"km/hr\",\n       \"beam\": 24.0,\n       \"hull_type\": \"slender\",\n       \"force_limit\": 96634.5,\n       \"max_ice_conc\": 80,\n       \"min_depth\": 10 \n    }' \\\n  http://localhost:8000/api/vehicle\n</code></pre> <p>This will create a vehicle of <code>vessel_type</code> \"SDA\" in the database. Note that <code>vessel_type</code> is unique, and any subsequent request to create the same vessel type will result in an error.</p>"},{"location":"vehicle-management/#updating-vehicle-properties","title":"Updating vehicle properties","text":"<p>Should you wish to update a <code>vessel_type</code>'s properties after creation, you can do so using the <code>force_properties</code> argument in your request.</p> <p>Let's say we actually wanted to display the speed in knots:</p> <p><pre><code>curl --header \"Content-Type: application/json\" \\\n  --request POST \\\n  --data '{\n      \"vessel_type\": \"SDA\",\n      \"max_speed\": 14.3,\n      \"unit\": \"knots\",\n      \"beam\": 24.0,\n      \"hull_type\": \"slender\",\n      \"force_limit\": 96634.5,\n      \"max_ice_conc\": 80,\n      \"min_depth\": 10,\n      \"force_properties\":\"true\"\n    }' \\\n  http://localhost:8000/api/vehicle\n</code></pre> With <code>\"force_properties\"</code> set to <code>\"true\"</code>, the request will be accepted and the properties for \"SDA\" will be updated.</p>"},{"location":"vehicle-management/#requesting-a-list-of-all-available-vehicles","title":"Requesting a list of all available vehicles","text":"<p>To request a list of all available vehicles in the database, you can make a GET request to the <code>api/vehicle/available</code> endpoint:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request GET \\\n  http://localhost:8000/api/vehicle/available\n</code></pre>"},{"location":"vehicle-management/#requesting-vehicles","title":"Requesting vehicles","text":""},{"location":"vehicle-management/#requesting-a-specific-vehicle","title":"Requesting a specific vehicle","text":"<p>To request a specific vehicle to be returned, you can make a GET request to the <code>api/vehicle</code> endpoint, adding the <code>vessel_type</code> to the end of the endpoint, for example <code>api/vehicle/SDA</code>:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request GET \\\n  http://localhost:8000/api/vehicle/SDA/\n</code></pre>"},{"location":"vehicle-management/#requesting-all-vehicles","title":"Requesting all vehicles","text":"<p>If you make a GET request to <code>api/vehicle</code> without specifying the <code>vessel_type</code>, all vehicles will be returned.</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request GET \\\n  http://localhost:8000/api/vehicle\n</code></pre>"},{"location":"vehicle-management/#deleting-a-vehicle","title":"Deleting a vehicle","text":"<p>To request a vehicle to be removed from the database, you can make a DELETE request to <code>api/vehicle</code>, specifying the <code>vessel_type</code> in the URL, just as with specific vehicle GET requests, <code>api/vehicle/SDA</code>:</p> <pre><code>curl --header \"Content-Type: application/json\" \\\n  --request DELETE \\\n  http://localhost:8000/api/vehicle/SDA/\n</code></pre> <p>Removing all vehicles in one go is not currently supported. </p>"},{"location":"vehicle-management/#adding-a-vehicle-to-an-environment-mesh","title":"Adding a vehicle to an environment mesh","text":"<p>Coming soon.</p>"},{"location":"autoapi/summary/","title":"Summary","text":"<ul> <li>build<ul> <li>lib<ul> <li>polarrouteserver<ul> <li>_version</li> <li>asgi</li> <li>celery</li> <li>route_api<ul> <li>admin</li> <li>apps</li> <li>management<ul> <li>commands<ul> <li>ensure_adminuser</li> <li>insert_mesh</li> </ul> </li> </ul> </li> <li>migrations<ul> <li>0001_initial</li> <li>0002_alter_route_info</li> <li>0003_route_end_name_route_start_name</li> <li>0004_remove_route_file</li> <li>0005_alter_route_end_name_alter_route_start_name</li> <li>0006_alter_route_end_name_alter_route_start_name</li> <li>0007_alter_route_end_name_alter_route_start_name</li> <li>0008_mesh_valid_date_end_mesh_valid_date_start</li> <li>0009_alter_job_route_alter_route_mesh</li> <li>0010_alter_mesh_options</li> <li>0011_alter_mesh_name</li> <li>0012_vehicle</li> <li>0013_location</li> <li>0014_alter_job_route</li> <li>0015_alter_location_name</li> <li>0016_alter_location_name</li> <li>0017_route_tags</li> <li>0018_alter_route_tags</li> </ul> </li> <li>models</li> <li>responses</li> <li>serializers</li> <li>tasks</li> <li>utils</li> <li>views</li> </ul> </li> <li>settings<ul> <li>base</li> <li>development</li> <li>production</li> <li>test</li> </ul> </li> <li>urls</li> <li>utils<ul> <li>loggers</li> </ul> </li> <li>wsgi</li> </ul> </li> <li>request_route<ul> <li>request_route</li> </ul> </li> </ul> </li> </ul> </li> <li>polarrouteserver<ul> <li>route_api<ul> <li>models</li> <li>responses</li> <li>serializers</li> <li>tasks</li> <li>utils</li> <li>views</li> </ul> </li> <li>utils<ul> <li>loggers</li> </ul> </li> </ul> </li> <li>request_route<ul> <li>request_route</li> </ul> </li> </ul>"},{"location":"autoapi/build/lib/polarrouteserver/","title":"polarrouteserver","text":""},{"location":"autoapi/build/lib/polarrouteserver/_version/","title":"_version","text":""},{"location":"autoapi/build/lib/polarrouteserver/asgi/","title":"asgi","text":"<p>ASGI config for polarrouteserver project.</p> <p>It exposes the ASGI callable as a module-level variable named <code>application</code>.</p> <p>For more information on this file, see https://docs.djangoproject.com/en/5.0/howto/deployment/asgi/</p>"},{"location":"autoapi/build/lib/polarrouteserver/celery/","title":"celery","text":""},{"location":"autoapi/build/lib/polarrouteserver/urls/","title":"urls","text":""},{"location":"autoapi/build/lib/polarrouteserver/wsgi/","title":"wsgi","text":"<p>WSGI config for polarrouteserver project.</p> <p>It exposes the WSGI callable as a module-level variable named <code>application</code>.</p> <p>For more information on this file, see https://docs.djangoproject.com/en/5.0/howto/deployment/wsgi/</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/","title":"route_api","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/admin/","title":"admin","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/admin/#build.lib.polarrouteserver.route_api.admin.JobAdmin","title":"<code>JobAdmin</code>","text":"<p>               Bases: <code>ModelAdmin</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/admin/#build.lib.polarrouteserver.route_api.admin.JobAdmin.get_status","title":"<code>get_status(obj)</code>","text":"<p>Get current job status from Celery.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/admin/#build.lib.polarrouteserver.route_api.admin.RouteAdmin","title":"<code>RouteAdmin</code>","text":"<p>               Bases: <code>ModelAdmin</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/admin/#build.lib.polarrouteserver.route_api.admin.RouteAdmin.display_tags","title":"<code>display_tags(obj)</code>","text":"<p>Display tags as a comma-separated string.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/apps/","title":"apps","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/","title":"models","text":"<p>Representations of database objects with the Django object relational model.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/#build.lib.polarrouteserver.route_api.models.Job","title":"<code>Job</code>","text":"<p>               Bases: <code>Model</code></p> <p>Route or mesh calculation jobs</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/#build.lib.polarrouteserver.route_api.models.Location","title":"<code>Location</code>","text":"<p>               Bases: <code>Model</code></p> <p>Preset locations</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/#build.lib.polarrouteserver.route_api.models.Mesh","title":"<code>Mesh</code>","text":"<p>               Bases: <code>Model</code></p> <p>Mesh</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/#build.lib.polarrouteserver.route_api.models.Mesh.size","title":"<code>size</code>  <code>property</code>","text":"<p>Computes a metric for the size of a mesh.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/#build.lib.polarrouteserver.route_api.models.Route","title":"<code>Route</code>","text":"<p>               Bases: <code>Model</code></p> <p>Represents a route.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/models/#build.lib.polarrouteserver.route_api.models.Vehicle","title":"<code>Vehicle</code>","text":"<p>               Bases: <code>Model</code></p> <p>Vehicle objects</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/","title":"responses","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin","title":"<code>ResponseMixin</code>","text":"<p>Mixin providing standardized API response methods.</p> <p>Ensures consistent response formatting across all API endpoints and provides response methods that correspond to the standardized schema objects defined in this module.</p> Usage <p>class MyView(ResponseMixin, APIView):     def get(self, request):         return self.success_response({\"data\": \"example\"})</p> Schema Integration <p>Each method in this mixin corresponds to a schema object: - success_response() -&gt; successResponseSchema (200) - accepted_response() -&gt; acceptedResponseSchema (202) - no_content_response() -&gt; noContentResponseSchema (204) - bad_request_response() -&gt; badRequestResponseSchema (400) - not_found_response() -&gt; notFoundResponseSchema (404) - not_acceptable_response() -&gt; notAcceptableResponseSchema (406)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin.accepted_response","title":"<code>accepted_response(data)</code>","text":"<p>Return standardized accepted response. Corresponds to: acceptedResponseSchema (202)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin.bad_request_response","title":"<code>bad_request_response(error_message, status_code=rest_framework.status.HTTP_400_BAD_REQUEST)</code>","text":"<p>Return standardized bad request response. Corresponds to: badRequestResponseSchema (400)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin.no_content_response","title":"<code>no_content_response(data=None, message=None)</code>","text":"<p>Return standardized no content response. Corresponds to: noContentResponseSchema (204)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin.not_acceptable_response","title":"<code>not_acceptable_response(message)</code>","text":"<p>Return standardized not acceptable response. Corresponds to: notAcceptableResponseSchema (406)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin.not_found_response","title":"<code>not_found_response(message)</code>","text":"<p>Return standardized not found response. Corresponds to: notFoundResponseSchema (404)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/responses/#build.lib.polarrouteserver.route_api.responses.ResponseMixin.success_response","title":"<code>success_response(data, status_code=rest_framework.status.HTTP_200_OK)</code>","text":"<p>Return standardized success response. Corresponds to: successResponseSchema (200)</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/","title":"serializers","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.JobStatusSerializer","title":"<code>JobStatusSerializer</code>","text":"<p>               Bases: <code>ModelSerializer</code></p> <p>Serializer for job status responses with dynamic status and route URL.</p> <p>The status field returns Celery task states: - PENDING: Task is waiting for execution or unknown task id - STARTED: Task has been started - SUCCESS: Task executed successfully - FAILURE: Task failed with an exception - RETRY: Task is being retried after failure - REVOKED: Task was revoked/cancelled</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.JobStatusSerializer.get_info","title":"<code>get_info(obj)</code>","text":"<p>Include error info when job failed.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.JobStatusSerializer.get_route_url","title":"<code>get_route_url(obj)</code>","text":"<p>Include route URL when job is successful.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.JobStatusSerializer.get_status","title":"<code>get_status(obj)</code>","text":"<p>Get current job status from Celery.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.JobStatusSerializer.to_representation","title":"<code>to_representation(instance)</code>","text":"<p>Add version to response.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.RouteSerializer","title":"<code>RouteSerializer</code>","text":"<p>               Bases: <code>TaggitSerializer</code>, <code>ModelSerializer</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/serializers/#build.lib.polarrouteserver.route_api.serializers.RouteSerializer.to_representation","title":"<code>to_representation(instance)</code>","text":"<p>Transform route data into structured format.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/tasks/","title":"tasks","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/tasks/#build.lib.polarrouteserver.route_api.tasks.import_new_meshes","title":"<code>import_new_meshes(self)</code>","text":"<p>Look for new meshes and insert them into the database.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/tasks/#build.lib.polarrouteserver.route_api.tasks.optimise_route","title":"<code>optimise_route(self, route_id, backup_mesh_ids=None)</code>","text":"<p>Use PolarRoute to calculate optimal route from Route database object and mesh. Saves Route in database and returns route geojson as dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>route_id</code> <code>int</code> <p>id of record in Route database table</p> required <code>backup_mesh_ids list</code> <p>list of database ids of backup meshes to try in order of priority</p> required <p>Returns:</p> Type Description <code>dict</code> <p>route geojson as dictionary</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/","title":"utils","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/#build.lib.polarrouteserver.route_api.utils.calculate_md5","title":"<code>calculate_md5(filename)</code>","text":"<p>create md5sum checksum for any file</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/#build.lib.polarrouteserver.route_api.utils.check_mesh_data","title":"<code>check_mesh_data(mesh)</code>","text":"<p>Check a mesh object for missing data sources.</p> <p>Parameters:</p> Name Type Description Default <code>mesh</code> <code>Mesh</code> <p>mesh object to evaluate.</p> required <p>Returns:</p> Type Description <code>str</code> <p>A user-friendly warning message as a string.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/#build.lib.polarrouteserver.route_api.utils.evaluate_route","title":"<code>evaluate_route(route_json, mesh)</code>","text":"<p>Run calculate_route method from PolarRoute to evaluate the fuel usage and travel time of a route.</p> <p>Parameters:</p> Name Type Description Default <code>route_json</code> <code>dict</code> <p>route to evaluate in geojson format.</p> required <code>mesh</code> <code>Mesh</code> <p>mesh object on which to evaluate the route.</p> required <p>Returns:</p> Name Type Description <code>dict</code> <code>dict</code> <p>evaluated route</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/#build.lib.polarrouteserver.route_api.utils.route_exists","title":"<code>route_exists(meshes, start_lat, start_lon, end_lat, end_lon)</code>","text":"<p>Check if a route of given parameters has already been calculated. Works through list of meshes in order, returns first matching route Return None if not and the route object if it has.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/#build.lib.polarrouteserver.route_api.utils.select_mesh","title":"<code>select_mesh(start_lat, start_lon, end_lat, end_lon)</code>","text":"<p>Find the most suitable mesh from the database for a given set of start and end coordinates. Returns either a list of Mesh objects or None.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/utils/#build.lib.polarrouteserver.route_api.utils.select_mesh_for_route_evaluation","title":"<code>select_mesh_for_route_evaluation(route)</code>","text":"<p>Select a mesh from the database to be used for route evaluation. The latest mesh containing all points in the route will be chosen. If no suitable meshes are available, return None.</p> <p>Parameters:</p> Name Type Description Default <code>route</code> <code>dict</code> <p>GeoJSON route to be evaluated.</p> required <p>Returns:</p> Type Description <code>Union[list[Mesh], None]</code> <p>Union[Mesh,None]: Selected mesh object or None.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/","title":"views","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.EvaluateRouteView","title":"<code>EvaluateRouteView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>APIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.EvaluateRouteView.post","title":"<code>post(request)</code>","text":"<p>POST Endpoint to evaluate traveltime and fuel usage on a given route.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.JobView","title":"<code>JobView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p> <p>View for handling job status requests</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.JobView.delete","title":"<code>delete(request, id)</code>","text":"<p>Cancel job</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.JobView.get","title":"<code>get(request, id)</code>","text":"<p>Return status of job and route URL if complete.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.LoggingMixin","title":"<code>LoggingMixin(*args, **kwargs)</code>","text":"<p>Provides full logging of requests and responses</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.MeshView","title":"<code>MeshView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>APIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.MeshView.get","title":"<code>get(request, id)</code>","text":"<p>GET Meshes by id</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.RecentRoutesView","title":"<code>RecentRoutesView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.RecentRoutesView.get","title":"<code>get(request)</code>","text":"<p>Get recent routes</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.RouteDetailView","title":"<code>RouteDetailView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.RouteDetailView.get","title":"<code>get(request, id)</code>","text":"<p>Return route data by route ID.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.RouteRequestView","title":"<code>RouteRequestView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.RouteRequestView.post","title":"<code>post(request)</code>","text":"<p>Entry point for route requests</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleDetailView","title":"<code>VehicleDetailView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleDetailView.delete","title":"<code>delete(request, vessel_type)</code>","text":"<p>Delete vehicle by vessel_type</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleDetailView.get","title":"<code>get(request, vessel_type)</code>","text":"<p>Retrieve vehicle by vessel_type</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleRequestView","title":"<code>VehicleRequestView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleRequestView.get","title":"<code>get(request)</code>","text":"<p>Retrieve all vehicles</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleRequestView.post","title":"<code>post(request)</code>","text":"<p>Entry point to create vehicles</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/views/#build.lib.polarrouteserver.route_api.views.VehicleTypeListView","title":"<code>VehicleTypeListView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p> <p>Endpoint to list all distinct vessel_types available.</p>"},{"location":"autoapi/build/lib/polarrouteserver/route_api/management/","title":"management","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/management/commands/","title":"commands","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/management/commands/ensure_adminuser/","title":"ensure_adminuser","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/management/commands/insert_mesh/","title":"insert_mesh","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/","title":"migrations","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0001_initial/","title":"0001_initial","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0002_alter_route_info/","title":"0002_alter_route_info","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0003_route_end_name_route_start_name/","title":"0003_route_end_name_route_start_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0004_remove_route_file/","title":"0004_remove_route_file","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0005_alter_route_end_name_alter_route_start_name/","title":"0005_alter_route_end_name_alter_route_start_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0006_alter_route_end_name_alter_route_start_name/","title":"0006_alter_route_end_name_alter_route_start_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0007_alter_route_end_name_alter_route_start_name/","title":"0007_alter_route_end_name_alter_route_start_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0008_mesh_valid_date_end_mesh_valid_date_start/","title":"0008_mesh_valid_date_end_mesh_valid_date_start","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0009_alter_job_route_alter_route_mesh/","title":"0009_alter_job_route_alter_route_mesh","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0010_alter_mesh_options/","title":"0010_alter_mesh_options","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0011_alter_mesh_name/","title":"0011_alter_mesh_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0012_vehicle/","title":"0012_vehicle","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0013_location/","title":"0013_location","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0014_alter_job_route/","title":"0014_alter_job_route","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0015_alter_location_name/","title":"0015_alter_location_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0016_alter_location_name/","title":"0016_alter_location_name","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0017_route_tags/","title":"0017_route_tags","text":""},{"location":"autoapi/build/lib/polarrouteserver/route_api/migrations/0018_alter_route_tags/","title":"0018_alter_route_tags","text":""},{"location":"autoapi/build/lib/polarrouteserver/settings/","title":"settings","text":""},{"location":"autoapi/build/lib/polarrouteserver/settings/base/","title":"base","text":"<p>Django settings for polarrouteserver project.</p> <p>For more information on this file, see https://docs.djangoproject.com/en/5.0/topics/settings/</p> <p>For the full list of settings and their values, see https://docs.djangoproject.com/en/5.0/ref/settings/</p>"},{"location":"autoapi/build/lib/polarrouteserver/settings/development/","title":"development","text":""},{"location":"autoapi/build/lib/polarrouteserver/settings/production/","title":"production","text":""},{"location":"autoapi/build/lib/polarrouteserver/settings/test/","title":"test","text":""},{"location":"autoapi/build/lib/polarrouteserver/utils/","title":"utils","text":""},{"location":"autoapi/build/lib/polarrouteserver/utils/loggers/","title":"loggers","text":""},{"location":"autoapi/build/lib/polarrouteserver/utils/loggers/#build.lib.polarrouteserver.utils.loggers.GroupWriteRotatingFileHandler","title":"<code>GroupWriteRotatingFileHandler</code>","text":"<p>               Bases: <code>RotatingFileHandler</code></p> <p>A rotating file handler which allows group write permissions.</p>"},{"location":"autoapi/build/lib/request_route/","title":"request_route","text":""},{"location":"autoapi/build/lib/request_route/request_route/","title":"request_route","text":"<p>Demo script for requesting routes from PolarRouteServer API using Python standard library.</p> <p>This script demonstrates the two-step workflow: 1. Submit a route request to /api/route, which returns a job ID 2. Monitor job status at /api/job/{job_id} until completion 3. When job is complete, retrieve route data from /api/route/{route_id}</p>"},{"location":"autoapi/build/lib/request_route/request_route/#build.lib.request_route.request_route.make_request","title":"<code>make_request(type, url, endpoint, headers, body=None)</code>","text":"<p>Sends HTTP request, prints details and returns response.</p> <p>Parameters:</p> Name Type Description Default <code>type</code> <code>str</code> <p>HTTP request type, e.g. \"GET\" or \"POST\"</p> required <code>url</code> <code>str</code> <p>base url to send request to</p> required <code>endpoint</code> <code>str</code> <p>endpoint, e.g. \"/api/route/some-id\"</p> required <code>headers</code> <code>dict</code> <p>HTTP headers</p> required <code>body</code> <code>dict</code> <p>HTTP request body. Defaults to None.</p> <code>None</code> <p>Returns:</p> Type Description <code>HTTPResponse</code> <p>http.client.HTTPResponse</p> <code>HTTPResponse</code> <p>status</p>"},{"location":"autoapi/build/lib/request_route/request_route/#build.lib.request_route.request_route.parse_location","title":"<code>parse_location(location)</code>","text":"<p>Parameters:</p> Name Type Description Default <code>location</code> <code>str</code> <p>a location either as the name of a standard location or latitude,longitude separated by a comma, e.g. -56.7,-65.01</p> required <p>Returns:</p> Type Description <code>Location</code> <p>a Location object</p>"},{"location":"autoapi/build/lib/request_route/request_route/#build.lib.request_route.request_route.request_route","title":"<code>request_route(url, start, end, status_update_delay=30, num_requests=10, force_new_route=False, mesh_id=None, tags=None)</code>","text":"<p>Requests a route from polarRouteServer, monitors job status until complete, then retrieves route data.</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Base URL to send request to.</p> required <code>start</code> <code>Location</code> <p>Start location of route</p> required <code>end</code> <code>Location</code> <p>End location of route</p> required <code>status_update_delay</code> <code>int</code> <p>Delay in seconds between each status request. Defaults to 10.</p> <code>30</code> <code>num_requests</code> <code>int</code> <p>Max number of status requests before giving up. Defaults to 10.</p> <code>10</code> <code>force_new_route</code> <code>bool</code> <p>Force recalculation of an already existing route. Default: False.</p> <code>False</code> <code>mesh_id</code> <code>int</code> <p>Custom mesh ID to use for route calculation. Default: None.</p> <code>None</code> <code>tags</code> <code>list</code> <p>Tags to assign to the route. Default: None.</p> <code>None</code> <p>Raises:</p> Type Description <code>Exception</code> <p>If no status URL is returned.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>JSON response of route data, or None if request failed.</p>"},{"location":"autoapi/polarrouteserver/","title":"polarrouteserver","text":""},{"location":"autoapi/polarrouteserver/route_api/","title":"route_api","text":""},{"location":"autoapi/polarrouteserver/route_api/models/","title":"models","text":"<p>Representations of database objects with the Django object relational model.</p>"},{"location":"autoapi/polarrouteserver/route_api/models/#polarrouteserver.route_api.models.Job","title":"<code>Job</code>","text":"<p>               Bases: <code>Model</code></p> <p>Route or mesh calculation jobs</p>"},{"location":"autoapi/polarrouteserver/route_api/models/#polarrouteserver.route_api.models.Location","title":"<code>Location</code>","text":"<p>               Bases: <code>Model</code></p> <p>Preset locations</p>"},{"location":"autoapi/polarrouteserver/route_api/models/#polarrouteserver.route_api.models.Mesh","title":"<code>Mesh</code>","text":"<p>               Bases: <code>Model</code></p> <p>Mesh</p>"},{"location":"autoapi/polarrouteserver/route_api/models/#polarrouteserver.route_api.models.Mesh.size","title":"<code>size</code>  <code>property</code>","text":"<p>Computes a metric for the size of a mesh.</p>"},{"location":"autoapi/polarrouteserver/route_api/models/#polarrouteserver.route_api.models.Route","title":"<code>Route</code>","text":"<p>               Bases: <code>Model</code></p> <p>Represents a route.</p>"},{"location":"autoapi/polarrouteserver/route_api/models/#polarrouteserver.route_api.models.Vehicle","title":"<code>Vehicle</code>","text":"<p>               Bases: <code>Model</code></p> <p>Vehicle objects</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/","title":"responses","text":""},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin","title":"<code>ResponseMixin</code>","text":"<p>Mixin providing standardized API response methods.</p> <p>Ensures consistent response formatting across all API endpoints and provides response methods that correspond to the standardized schema objects defined in this module.</p> Usage <p>class MyView(ResponseMixin, APIView):     def get(self, request):         return self.success_response({\"data\": \"example\"})</p> Schema Integration <p>Each method in this mixin corresponds to a schema object: - success_response() -&gt; successResponseSchema (200) - accepted_response() -&gt; acceptedResponseSchema (202) - no_content_response() -&gt; noContentResponseSchema (204) - bad_request_response() -&gt; badRequestResponseSchema (400) - not_found_response() -&gt; notFoundResponseSchema (404) - not_acceptable_response() -&gt; notAcceptableResponseSchema (406)</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin.accepted_response","title":"<code>accepted_response(data)</code>","text":"<p>Return standardized accepted response. Corresponds to: acceptedResponseSchema (202)</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin.bad_request_response","title":"<code>bad_request_response(error_message, status_code=rest_framework.status.HTTP_400_BAD_REQUEST)</code>","text":"<p>Return standardized bad request response. Corresponds to: badRequestResponseSchema (400)</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin.no_content_response","title":"<code>no_content_response(data=None, message=None)</code>","text":"<p>Return standardized no content response. Corresponds to: noContentResponseSchema (204)</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin.not_acceptable_response","title":"<code>not_acceptable_response(message)</code>","text":"<p>Return standardized not acceptable response. Corresponds to: notAcceptableResponseSchema (406)</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin.not_found_response","title":"<code>not_found_response(message)</code>","text":"<p>Return standardized not found response. Corresponds to: notFoundResponseSchema (404)</p>"},{"location":"autoapi/polarrouteserver/route_api/responses/#polarrouteserver.route_api.responses.ResponseMixin.success_response","title":"<code>success_response(data, status_code=rest_framework.status.HTTP_200_OK)</code>","text":"<p>Return standardized success response. Corresponds to: successResponseSchema (200)</p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/","title":"serializers","text":""},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.JobStatusSerializer","title":"<code>JobStatusSerializer</code>","text":"<p>               Bases: <code>ModelSerializer</code></p> <p>Serializer for job status responses with dynamic status and route URL.</p> <p>The status field returns Celery task states: - PENDING: Task is waiting for execution or unknown task id - STARTED: Task has been started - SUCCESS: Task executed successfully - FAILURE: Task failed with an exception - RETRY: Task is being retried after failure - REVOKED: Task was revoked/cancelled</p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.JobStatusSerializer.get_info","title":"<code>get_info(obj)</code>","text":"<p>Include error info when job failed.</p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.JobStatusSerializer.get_route_url","title":"<code>get_route_url(obj)</code>","text":"<p>Include route URL when job is successful.</p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.JobStatusSerializer.get_status","title":"<code>get_status(obj)</code>","text":"<p>Get current job status from Celery.</p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.JobStatusSerializer.to_representation","title":"<code>to_representation(instance)</code>","text":"<p>Add version to response.</p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.RouteSerializer","title":"<code>RouteSerializer</code>","text":"<p>               Bases: <code>TaggitSerializer</code>, <code>ModelSerializer</code></p>"},{"location":"autoapi/polarrouteserver/route_api/serializers/#polarrouteserver.route_api.serializers.RouteSerializer.to_representation","title":"<code>to_representation(instance)</code>","text":"<p>Transform route data into structured format.</p>"},{"location":"autoapi/polarrouteserver/route_api/tasks/","title":"tasks","text":""},{"location":"autoapi/polarrouteserver/route_api/tasks/#polarrouteserver.route_api.tasks.import_new_meshes","title":"<code>import_new_meshes(self)</code>","text":"<p>Look for new meshes and insert them into the database.</p>"},{"location":"autoapi/polarrouteserver/route_api/tasks/#polarrouteserver.route_api.tasks.optimise_route","title":"<code>optimise_route(self, route_id, backup_mesh_ids=None)</code>","text":"<p>Use PolarRoute to calculate optimal route from Route database object and mesh. Saves Route in database and returns route geojson as dictionary.</p> <p>Parameters:</p> Name Type Description Default <code>route_id</code> <code>int</code> <p>id of record in Route database table</p> required <code>backup_mesh_ids list</code> <p>list of database ids of backup meshes to try in order of priority</p> required <p>Returns:</p> Type Description <code>dict</code> <p>route geojson as dictionary</p>"},{"location":"autoapi/polarrouteserver/route_api/utils/","title":"utils","text":""},{"location":"autoapi/polarrouteserver/route_api/utils/#polarrouteserver.route_api.utils.calculate_md5","title":"<code>calculate_md5(filename)</code>","text":"<p>create md5sum checksum for any file</p>"},{"location":"autoapi/polarrouteserver/route_api/utils/#polarrouteserver.route_api.utils.check_mesh_data","title":"<code>check_mesh_data(mesh)</code>","text":"<p>Check a mesh object for missing data sources.</p> <p>Parameters:</p> Name Type Description Default <code>mesh</code> <code>Mesh</code> <p>mesh object to evaluate.</p> required <p>Returns:</p> Type Description <code>str</code> <p>A user-friendly warning message as a string.</p>"},{"location":"autoapi/polarrouteserver/route_api/utils/#polarrouteserver.route_api.utils.evaluate_route","title":"<code>evaluate_route(route_json, mesh)</code>","text":"<p>Run calculate_route method from PolarRoute to evaluate the fuel usage and travel time of a route.</p> <p>Parameters:</p> Name Type Description Default <code>route_json</code> <code>dict</code> <p>route to evaluate in geojson format.</p> required <code>mesh</code> <code>Mesh</code> <p>mesh object on which to evaluate the route.</p> required <p>Returns:</p> Name Type Description <code>dict</code> <code>dict</code> <p>evaluated route</p>"},{"location":"autoapi/polarrouteserver/route_api/utils/#polarrouteserver.route_api.utils.route_exists","title":"<code>route_exists(meshes, start_lat, start_lon, end_lat, end_lon)</code>","text":"<p>Check if a route of given parameters has already been calculated. Works through list of meshes in order, returns first matching route Return None if not and the route object if it has.</p>"},{"location":"autoapi/polarrouteserver/route_api/utils/#polarrouteserver.route_api.utils.select_mesh","title":"<code>select_mesh(start_lat, start_lon, end_lat, end_lon)</code>","text":"<p>Find the most suitable mesh from the database for a given set of start and end coordinates. Returns either a list of Mesh objects or None.</p>"},{"location":"autoapi/polarrouteserver/route_api/utils/#polarrouteserver.route_api.utils.select_mesh_for_route_evaluation","title":"<code>select_mesh_for_route_evaluation(route)</code>","text":"<p>Select a mesh from the database to be used for route evaluation. The latest mesh containing all points in the route will be chosen. If no suitable meshes are available, return None.</p> <p>Parameters:</p> Name Type Description Default <code>route</code> <code>dict</code> <p>GeoJSON route to be evaluated.</p> required <p>Returns:</p> Type Description <code>Union[list[Mesh], None]</code> <p>Union[Mesh,None]: Selected mesh object or None.</p>"},{"location":"autoapi/polarrouteserver/route_api/views/","title":"views","text":""},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.EvaluateRouteView","title":"<code>EvaluateRouteView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>APIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.EvaluateRouteView.post","title":"<code>post(request)</code>","text":"<p>POST Endpoint to evaluate traveltime and fuel usage on a given route.</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.JobView","title":"<code>JobView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p> <p>View for handling job status requests</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.JobView.delete","title":"<code>delete(request, id)</code>","text":"<p>Cancel job</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.JobView.get","title":"<code>get(request, id)</code>","text":"<p>Return status of job and route URL if complete.</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.LoggingMixin","title":"<code>LoggingMixin(*args, **kwargs)</code>","text":"<p>Provides full logging of requests and responses</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.MeshView","title":"<code>MeshView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>APIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.MeshView.get","title":"<code>get(request, id)</code>","text":"<p>GET Meshes by id</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.RecentRoutesView","title":"<code>RecentRoutesView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.RecentRoutesView.get","title":"<code>get(request)</code>","text":"<p>Get recent routes</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.RouteDetailView","title":"<code>RouteDetailView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.RouteDetailView.get","title":"<code>get(request, id)</code>","text":"<p>Return route data by route ID.</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.RouteRequestView","title":"<code>RouteRequestView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.RouteRequestView.post","title":"<code>post(request)</code>","text":"<p>Entry point for route requests</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleDetailView","title":"<code>VehicleDetailView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleDetailView.delete","title":"<code>delete(request, vessel_type)</code>","text":"<p>Delete vehicle by vessel_type</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleDetailView.get","title":"<code>get(request, vessel_type)</code>","text":"<p>Retrieve vehicle by vessel_type</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleRequestView","title":"<code>VehicleRequestView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleRequestView.get","title":"<code>get(request)</code>","text":"<p>Retrieve all vehicles</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleRequestView.post","title":"<code>post(request)</code>","text":"<p>Entry point to create vehicles</p>"},{"location":"autoapi/polarrouteserver/route_api/views/#polarrouteserver.route_api.views.VehicleTypeListView","title":"<code>VehicleTypeListView(*args, **kwargs)</code>","text":"<p>               Bases: <code>LoggingMixin</code>, <code>ResponseMixin</code>, <code>GenericAPIView</code></p> <p>Endpoint to list all distinct vessel_types available.</p>"},{"location":"autoapi/polarrouteserver/utils/","title":"utils","text":""},{"location":"autoapi/polarrouteserver/utils/loggers/","title":"loggers","text":""},{"location":"autoapi/polarrouteserver/utils/loggers/#polarrouteserver.utils.loggers.GroupWriteRotatingFileHandler","title":"<code>GroupWriteRotatingFileHandler</code>","text":"<p>               Bases: <code>RotatingFileHandler</code></p> <p>A rotating file handler which allows group write permissions.</p>"},{"location":"autoapi/request_route/","title":"request_route","text":""},{"location":"autoapi/request_route/request_route/","title":"request_route","text":"<p>Demo script for requesting routes from PolarRouteServer API using Python standard library.</p> <p>This script demonstrates the two-step workflow: 1. Submit a route request to /api/route, which returns a job ID 2. Monitor job status at /api/job/{job_id} until completion 3. When job is complete, retrieve route data from /api/route/{route_id}</p>"},{"location":"autoapi/request_route/request_route/#request_route.request_route.make_request","title":"<code>make_request(type, url, endpoint, headers, body=None)</code>","text":"<p>Sends HTTP request, prints details and returns response.</p> <p>Parameters:</p> Name Type Description Default <code>type</code> <code>str</code> <p>HTTP request type, e.g. \"GET\" or \"POST\"</p> required <code>url</code> <code>str</code> <p>base url to send request to</p> required <code>endpoint</code> <code>str</code> <p>endpoint, e.g. \"/api/route/some-id\"</p> required <code>headers</code> <code>dict</code> <p>HTTP headers</p> required <code>body</code> <code>dict</code> <p>HTTP request body. Defaults to None.</p> <code>None</code> <p>Returns:</p> Type Description <code>HTTPResponse</code> <p>http.client.HTTPResponse</p> <code>HTTPResponse</code> <p>status</p>"},{"location":"autoapi/request_route/request_route/#request_route.request_route.parse_location","title":"<code>parse_location(location)</code>","text":"<p>Parameters:</p> Name Type Description Default <code>location</code> <code>str</code> <p>a location either as the name of a standard location or latitude,longitude separated by a comma, e.g. -56.7,-65.01</p> required <p>Returns:</p> Type Description <code>Location</code> <p>a Location object</p>"},{"location":"autoapi/request_route/request_route/#request_route.request_route.request_route","title":"<code>request_route(url, start, end, status_update_delay=30, num_requests=10, force_new_route=False, mesh_id=None, tags=None)</code>","text":"<p>Requests a route from polarRouteServer, monitors job status until complete, then retrieves route data.</p> <p>Parameters:</p> Name Type Description Default <code>url</code> <code>str</code> <p>Base URL to send request to.</p> required <code>start</code> <code>Location</code> <p>Start location of route</p> required <code>end</code> <code>Location</code> <p>End location of route</p> required <code>status_update_delay</code> <code>int</code> <p>Delay in seconds between each status request. Defaults to 10.</p> <code>30</code> <code>num_requests</code> <code>int</code> <p>Max number of status requests before giving up. Defaults to 10.</p> <code>10</code> <code>force_new_route</code> <code>bool</code> <p>Force recalculation of an already existing route. Default: False.</p> <code>False</code> <code>mesh_id</code> <code>int</code> <p>Custom mesh ID to use for route calculation. Default: None.</p> <code>None</code> <code>tags</code> <code>list</code> <p>Tags to assign to the route. Default: None.</p> <code>None</code> <p>Raises:</p> Type Description <code>Exception</code> <p>If no status URL is returned.</p> <p>Returns:</p> Name Type Description <code>str</code> <code>str</code> <p>JSON response of route data, or None if request failed.</p>"}]}